(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-readHistory"],{"0486":function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,'@charset "UTF-8";\n/* 页面左右间距 */\n/* 文字尺寸 */\n/*文字颜色*/\n/* 边框颜色 */\n/* 图片加载中颜色 */\n/* 行为相关颜色 */uni-page-body[data-v-4d689638],\n.content[data-v-4d689638]{background:#f8f8f8}.hot-section[data-v-4d689638]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-flex-wrap:wrap;flex-wrap:wrap;padding:0 %?30?%;margin-top:%?16?%;background:#fff}.hot-section .guess-item[data-v-4d689638]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;width:100%;padding-bottom:%?40?%}.hot-section .image-wrapper[data-v-4d689638]{width:30%;height:%?250?%;border-radius:3px;overflow:hidden}.hot-section .image-wrapper uni-image[data-v-4d689638]{width:100%;height:100%;opacity:1}.hot-section .title[data-v-4d689638]{font-size:%?32?%;color:#303133;line-height:%?80?%}.hot-section .title2[data-v-4d689638]{font-size:%?24?%;color:#909399;line-height:%?40?%;height:%?80?%;overflow:hidden;text-overflow:ellipsis;display:block}.hot-section .price[data-v-4d689638]{font-size:%?32?%;color:#fa436a;line-height:%?80?%}.hot-section .txt[data-v-4d689638]{width:70%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;padding-left:%?40?%}.hot-section .hor-txt[data-v-4d689638]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.hot-section .time[data-v-4d689638]{font-size:%?24?%;color:#303133;line-height:%?80?%}body.?%PAGE?%[data-v-4d689638]{background:#f8f8f8}',""])},"0547":function(t,e,a){"use strict";var i={"uni-load-more":a("355d9").default},n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"content"},[null==t.productList||0===t.productList.length?a("empty"):t._e(),a("v-uni-view",{staticClass:"hot-section"},t._l(t.productList,function(e,i){return a("v-uni-view",{key:i,staticClass:"guess-item",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.navToDetailPage(e)}}},[a("v-uni-view",{staticClass:"image-wrapper"},[a("v-uni-image",{attrs:{src:e.productPic,mode:"aspectFill"}})],1),a("v-uni-view",{staticClass:"txt"},[a("v-uni-text",{staticClass:"title clamp"},[t._v(t._s(e.productName))]),a("v-uni-text",{staticClass:"title2"},[t._v(t._s(e.productSubTitle))]),a("v-uni-view",{staticClass:"hor-txt"},[a("v-uni-text",{staticClass:"price"},[t._v("￥"+t._s(e.productPrice))]),a("v-uni-text",{staticClass:"time"},[t._v(t._s(t._f("formatDateTime")(e.createTime)))])],1)],1)],1)}),1),a("uni-load-more",{attrs:{status:t.loadingType}})],1)},o=[];a.d(e,"b",function(){return n}),a.d(e,"c",function(){return o}),a.d(e,"a",function(){return i})},"204e":function(t,e,a){"use strict";a.r(e);var i=a("7b7b"),n=a.n(i);for(var o in i)"default"!==o&&function(t){a.d(e,t,function(){return i[t]})}(o);e["default"]=n.a},"375a":function(t,e,a){"use strict";var i=a("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.createReadHistory=o,e.fetchReadHistoryList=r,e.clearReadHistory=s;var n=i(a("afdb"));function o(t){return(0,n.default)({method:"POST",url:"/member/readHistory/create",data:t})}function r(t){return(0,n.default)({method:"GET",url:"/member/readHistory/list",params:t})}function s(){return(0,n.default)({method:"POST",url:"/member/readHistory/clear"})}},3924:function(t,e,a){var i=a("0486");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("4f06").default;n("c30ddcec",i,!0,{sourceMap:!1,shadowMode:!1})},4780:function(t,e,a){"use strict";a.r(e);var i=a("0547"),n=a("204e");for(var o in n)"default"!==o&&function(t){a.d(e,t,function(){return n[t]})}(o);a("c63a");var r,s=a("f0c5"),d=Object(s["a"])(n["default"],i["b"],i["c"],!1,null,"4d689638",null,!1,i["a"],r);e["default"]=d.exports},"7b7b":function(t,e,a){"use strict";var i=a("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("96cf");var n=i(a("3b8d")),o=i(a("eb91")),r=i(a("355d9")),s=a("899e"),d=a("375a"),c={components:{uniLoadMore:r.default,empty:o.default},data:function(){return{loadingType:"more",productList:[],searchParam:{pageNum:1,pageSize:6}}},onLoad:function(t){this.loadData()},onPullDownRefresh:function(){this.loadData("refresh")},onReachBottom:function(){this.searchParam.pageNum++,this.loadData()},onNavigationBarButtonTap:function(t){var e=t.index,a=this;0===e&&uni.showModal({title:"提示",content:"是否要清空所有浏览记录？",success:function(t){t.confirm&&(0,d.clearReadHistory)().then(function(t){a.loadData("refresh")})}})},filters:{formatDateTime:function(t){if(null==t||""===t)return"N/A";var e=new Date(t);return(0,s.formatDate)(e,"yyyy-MM-dd hh:mm:ss")}},methods:{loadData:function(){var t=(0,n.default)(regeneratorRuntime.mark(function t(){var e,a,i=this,n=arguments;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(e=n.length>0&&void 0!==n[0]?n[0]:"add",a=n.length>1?n[1]:void 0,"add"!==e){t.next=8;break}if("nomore"!==this.loadingType){t.next=5;break}return t.abrupt("return");case 5:this.loadingType="loading",t.next=9;break;case 8:this.loadingType="more";case 9:"refresh"===e&&(this.searchParam.pageNum=1,this.productList=[]),(0,d.fetchReadHistoryList)(this.searchParam).then(function(t){var n=t.data.list;0===n.length?(i.loadingType="nomore",i.searchParam.pageNum--):(n.length<i.searchParam.pageSize?(i.loadingType="nomore",i.searchParam.pageNum--):i.loadingType="more",i.productList=i.productList.concat(n)),"refresh"===e&&(1==a?uni.hideLoading():uni.stopPullDownRefresh())});case 11:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),navToDetailPage:function(t){var e=t.productId;uni.navigateTo({url:"/pages/product/product?id=".concat(e)})},stopPrevent:function(){}}};e.default=c},c63a:function(t,e,a){"use strict";var i=a("3924"),n=a.n(i);n.a}}]);